<div id="apiTestContainer">
    <h3>API Test Component</h3>
    <div id="apiTestResults">
        <div class="loading-text">Testing API connection...</div>
    </div>
</div>

<script>
// Simple API test component
(function() {
    console.log('[APITest] Component loaded');
    
    async function testAPI() {
        const container = document.getElementById('apiTestResults');
        if (!container) {
            console.error('[APITest] Container not found');
            return;
        }
        
        let html = '<h4>API Test Results:</h4>';
        
        try {
            // Test the knowledge analysis API
            console.log('[APITest] Testing /api/knowledge_analysis_data...');
            const response = await fetch('/api/knowledge_analysis_data');
            const data = await response.json();
            
            html += '<div style="margin: 10px; padding: 10px; background: #e8f5e9; border: 1px solid #4caf50; border-radius: 4px;">';
            html += '<strong>✓ API Connection Successful</strong><br>';
            html += `Status: ${response.status}<br>`;
            html += `Has knowledge_analysis: ${data.knowledge_analysis ? 'Yes' : 'No'}<br>`;
            
            if (data.knowledge_analysis) {
                const models = Object.keys(data.knowledge_analysis);
                html += `Number of models: ${models.length}<br>`;
                html += `First 3 models: ${models.slice(0, 3).join(', ')}`;
            }
            html += '</div>';
            
            // Show raw data structure
            html += '<div style="margin: 10px; padding: 10px; background: #f5f5f5; border: 1px solid #ccc; border-radius: 4px;">';
            html += '<strong>Data Structure:</strong><br>';
            html += '<pre style="overflow: auto; max-height: 300px;">';
            html += JSON.stringify(data, null, 2);
            html += '</pre>';
            html += '</div>';
            
        } catch (error) {
            console.error('[APITest] Error:', error);
            html += '<div style="margin: 10px; padding: 10px; background: #ffebee; border: 1px solid #f44336; border-radius: 4px;">';
            html += '<strong>✗ API Connection Failed</strong><br>';
            html += `Error: ${error.message}`;
            html += '</div>';
        }
        
        container.innerHTML = html;
    }
    
    // Run test immediately
    setTimeout(() => {
        console.log('[APITest] Running test...');
        testAPI();
    }, 100);
})();
</script>

<style>
#apiTestContainer {
    padding: 20px;
    background: #fafafa;
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    margin: 20px;
}
</style>