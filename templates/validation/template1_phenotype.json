{
  "template_info": {
    "name": "template1_phenotype",
    "type": "phenotype",
    "description": "Comprehensive phenotype prediction template",
    "version": "1.0",
    "purpose": "This template extracts detailed phenotypic predictions for bacterial species across 13 different characteristics. It tests the model's ability to infer biological properties from species names and any embedded knowledge.",
    "usage_context": {
      "when_to_use": "Use this template when you need comprehensive phenotypic predictions including metabolic, pathogenic, and morphological characteristics.",
      "typical_workflow": "This is the primary phenotype template, providing the most complete set of predictions. Results can be compared against known phenotypic data to evaluate model accuracy."
    },
    "interpretation_guide": {
      "gram_staining": "Fundamental cell wall property: positive (thick peptidoglycan), negative (thin peptidoglycan with outer membrane), or variable",
      "motility": "Whether the organism can move independently, typically via flagella or other mechanisms",
      "aerophilicity": "Oxygen requirements - can be multiple values (e.g., facultatively anaerobic organisms)",
      "extreme_environment_tolerance": "Ability to survive in harsh conditions (high/low pH, temperature extremes, high salt, etc.)",
      "biosafety_level": "CDC/WHO classification based on pathogenic risk (BSL-1: minimal risk, BSL-2: moderate risk, BSL-3: serious risk)",
      "pathogenicity": "Animal/plant pathogenicity indicates disease-causing potential in respective hosts"
    },
    "quality_indicators": {
      "high_quality_response": "Predictions align with known biological constraints (e.g., obligate anaerobes shouldn't be aerobic), internally consistent responses",
      "low_quality_response": "Biologically impossible combinations, missing critical fields for well-known organisms, or excessive uncertainty"
    }
  },
  "expected_response": {
    "format": "json",
    "required_fields": [],
    "optional_fields": [
      "gram_staining", "motility", "aerophilicity", "extreme_environment_tolerance",
      "biofilm_formation", "animal_pathogenicity", "biosafety_level", 
      "health_association", "host_association", "plant_pathogenicity",
      "spore_formation", "hemolysis", "cell_shape"
    ]
  },
  "field_definitions": {
    "gram_staining": {
      "type": "string",
      "required": false,
      "description": "Gram staining result",
      "allowed_values": ["gram stain positive", "gram stain negative", "gram stain variable"],
      "visualization": {
        "color_mapping": {
          "gram stain positive": {"label": "Positive", "background": "#d4edda", "color": "#155724"},
          "gram stain negative": {"label": "Negative", "background": "#f8d7da", "color": "#721c24"},
          "gram stain variable": {"label": "Variable", "background": "#fff3cd", "color": "#856404"}
        }
      },
      "validation_rules": {
        "case_sensitive": false,
        "trim_whitespace": true,
        "normalize_mapping": {
          "gram stain positive": ["gram stain positive", "gram positive", "gram+", "positive"],
          "gram stain negative": ["gram stain negative", "gram negative", "gram-", "negative"],
          "gram stain variable": ["gram stain variable", "variable"]
        }
      }
    },
    "motility": {
      "type": "string",
      "required": false,
      "description": "Motility capability",
      "allowed_values": ["TRUE", "FALSE"],
      "visualization": {
        "color_mapping": {
          "TRUE": {"label": "True", "background": "#d4edda", "color": "#155724"},
          "FALSE": {"label": "False", "background": "#f8d7da", "color": "#721c24"}
        }
      },
      "validation_rules": {
        "case_sensitive": false,
        "trim_whitespace": true,
        "normalize_mapping": {
          "TRUE": ["true", "yes", "motile", "positive", "1"],
          "FALSE": ["false", "no", "non-motile", "nonmotile", "immobile", "negative", "0"]
        }
      }
    },
    "aerophilicity": {
      "type": "array",
      "required": false,
      "description": "Oxygen requirements (can have multiple values)",
      "allowed_values": ["aerobic", "aerotolerant", "anaerobic", "facultatively anaerobic"],
      "visualization": {
        "color_mapping": {
          "aerobic": {"label": "Aerobic", "background": "#cce5ff", "color": "#004085"},
          "anaerobic": {"label": "Anaerobic", "background": "#e2e3e5", "color": "#383d41"},
          "facultatively anaerobic": {"label": "Facultative", "background": "#d1ecf1", "color": "#0c5460"},
          "aerotolerant": {"label": "Aerotolerant", "background": "#e7e8ea", "color": "#495057"}
        }
      },
      "validation_rules": {
        "case_sensitive": false,
        "trim_whitespace": true,
        "normalize_mapping": {
          "aerobic": ["aerobic", "aerobe", "oxygen-requiring"],
          "aerotolerant": ["aerotolerant", "aerotolerance"],
          "anaerobic": ["anaerobic", "anaerobe", "oxygen-free"],
          "facultatively anaerobic": ["facultatively anaerobic", "facultative anaerobic", "facultative", "facultatively"]
        },
        "allow_single_value": true,
        "max_values": 4
      }
    },
    "extreme_environment_tolerance": {
      "type": "string",
      "required": false,
      "description": "Tolerance to extreme environmental conditions",
      "allowed_values": ["TRUE", "FALSE"],
      "visualization": {
        "color_mapping": {
          "TRUE": {"label": "True", "background": "#d4edda", "color": "#155724"},
          "FALSE": {"label": "False", "background": "#f8d7da", "color": "#721c24"}
        }
      },
      "validation_rules": {
        "case_sensitive": false,
        "trim_whitespace": true,
        "normalize_mapping": {
          "TRUE": ["true", "yes", "tolerant", "positive", "1"],
          "FALSE": ["false", "no", "intolerant", "negative", "0"]
        }
      }
    },
    "biofilm_formation": {
      "type": "string",
      "required": false,
      "description": "Ability to form biofilms",
      "allowed_values": ["TRUE", "FALSE"],
      "visualization": {
        "color_mapping": {
          "TRUE": {"label": "True", "background": "#d4edda", "color": "#155724"},
          "FALSE": {"label": "False", "background": "#f8d7da", "color": "#721c24"}
        }
      },
      "validation_rules": {
        "case_sensitive": false,
        "trim_whitespace": true,
        "normalize_mapping": {
          "TRUE": ["true", "yes", "biofilm-forming", "positive", "1"],
          "FALSE": ["false", "no", "non-biofilm-forming", "negative", "0"]
        }
      }
    },
    "animal_pathogenicity": {
      "type": "string",
      "required": false,
      "description": "Pathogenic to animals",
      "allowed_values": ["TRUE", "FALSE"],
      "visualization": {
        "color_mapping": {
          "TRUE": {"label": "True", "background": "#d4edda", "color": "#155724"},
          "FALSE": {"label": "False", "background": "#f8d7da", "color": "#721c24"}
        }
      },
      "validation_rules": {
        "case_sensitive": false,
        "trim_whitespace": true,
        "normalize_mapping": {
          "TRUE": ["true", "yes", "pathogenic", "positive", "1"],
          "FALSE": ["false", "no", "non-pathogenic", "negative", "0"]
        }
      }
    },
    "biosafety_level": {
      "type": "string",
      "required": false,
      "description": "Biosafety classification level",
      "allowed_values": ["biosafety level 1", "biosafety level 2", "biosafety level 3"],
      "visualization": {
        "color_mapping": {
          "biosafety level 1": {"label": "BSL-1", "background": "#d4edda", "color": "#155724"},
          "biosafety level 2": {"label": "BSL-2", "background": "#fff3cd", "color": "#856404"},
          "biosafety level 3": {"label": "BSL-3", "background": "#ffeaa7", "color": "#b8860b"}
        }
      },
      "validation_rules": {
        "case_sensitive": false,
        "trim_whitespace": true,
        "normalize_mapping": {
          "biosafety level 1": ["biosafety level 1", "bsl-1", "bsl1", "level 1"],
          "biosafety level 2": ["biosafety level 2", "bsl-2", "bsl2", "level 2"],
          "biosafety level 3": ["biosafety level 3", "bsl-3", "bsl3", "level 3"]
        }
      }
    },
    "health_association": {
      "type": "string",
      "required": false,
      "description": "Association with human health",
      "allowed_values": ["TRUE", "FALSE"],
      "visualization": {
        "color_mapping": {
          "TRUE": {"label": "True", "background": "#d4edda", "color": "#155724"},
          "FALSE": {"label": "False", "background": "#f8d7da", "color": "#721c24"}
        }
      },
      "validation_rules": {
        "case_sensitive": false,
        "trim_whitespace": true,
        "normalize_mapping": {
          "TRUE": ["true", "yes", "health-associated", "positive", "1"],
          "FALSE": ["false", "no", "not health-associated", "negative", "0"]
        }
      }
    },
    "host_association": {
      "type": "string",
      "required": false,
      "description": "Association with a host organism",
      "allowed_values": ["TRUE", "FALSE"],
      "visualization": {
        "color_mapping": {
          "TRUE": {"label": "True", "background": "#d4edda", "color": "#155724"},
          "FALSE": {"label": "False", "background": "#f8d7da", "color": "#721c24"}
        }
      },
      "validation_rules": {
        "case_sensitive": false,
        "trim_whitespace": true,
        "normalize_mapping": {
          "TRUE": ["true", "yes", "host-associated", "positive", "1"],
          "FALSE": ["false", "no", "free-living", "negative", "0"]
        }
      }
    },
    "plant_pathogenicity": {
      "type": "string",
      "required": false,
      "description": "Pathogenic to plants",
      "allowed_values": ["TRUE", "FALSE"],
      "visualization": {
        "color_mapping": {
          "TRUE": {"label": "True", "background": "#d4edda", "color": "#155724"},
          "FALSE": {"label": "False", "background": "#f8d7da", "color": "#721c24"}
        }
      },
      "validation_rules": {
        "case_sensitive": false,
        "trim_whitespace": true,
        "normalize_mapping": {
          "TRUE": ["true", "yes", "phytopathogenic", "plant pathogenic", "positive", "1"],
          "FALSE": ["false", "no", "non-phytopathogenic", "negative", "0"]
        }
      }
    },
    "spore_formation": {
      "type": "string",
      "required": false,
      "description": "Ability to form spores",
      "allowed_values": ["TRUE", "FALSE"],
      "visualization": {
        "color_mapping": {
          "TRUE": {"label": "True", "background": "#d4edda", "color": "#155724"},
          "FALSE": {"label": "False", "background": "#f8d7da", "color": "#721c24"}
        }
      },
      "validation_rules": {
        "case_sensitive": false,
        "trim_whitespace": true,
        "normalize_mapping": {
          "TRUE": ["true", "yes", "spore-forming", "sporulating", "positive", "1"],
          "FALSE": ["false", "no", "non-spore-forming", "vegetative", "negative", "0"]
        }
      }
    },
    "hemolysis": {
      "type": "string",
      "required": false,
      "description": "Hemolytic activity",
      "allowed_values": ["alpha", "beta", "gamma", "non-hemolytic"],
      "visualization": {
        "color_mapping": {
          "alpha": {"label": "Alpha", "background": "#cce5ff", "color": "#004085"},
          "beta": {"label": "Beta", "background": "#f8d7da", "color": "#721c24"},
          "gamma": {"label": "Gamma", "background": "#d1ecf1", "color": "#0c5460"},
          "non-hemolytic": {"label": "Non-hemolytic", "background": "#e2e3e5", "color": "#6c757d"}
        }
      },
      "validation_rules": {
        "case_sensitive": false,
        "trim_whitespace": true,
        "normalize_mapping": {
          "alpha": ["alpha", "α", "alpha-hemolytic"],
          "beta": ["beta", "β", "beta-hemolytic"],
          "gamma": ["gamma", "γ", "gamma-hemolytic"],
          "non-hemolytic": ["non-hemolytic", "non", "none", "no hemolysis"]
        }
      }
    },
    "cell_shape": {
      "type": "string",
      "required": false,
      "description": "Cellular morphology",
      "allowed_values": ["bacillus", "coccus", "spirillum", "tail"],
      "visualization": {
        "color_mapping": {
          "bacillus": {"label": "Rod", "background": "#f3e5f5", "color": "#4a148c"},
          "coccus": {"label": "Spherical", "background": "#e1f5fe", "color": "#01579b"},
          "spirillum": {"label": "Spiral", "background": "#fff8e1", "color": "#e65100"},
          "tail": {"label": "Tail", "background": "#e8f5e8", "color": "#2e7d32"}
        }
      },
      "validation_rules": {
        "case_sensitive": false,
        "trim_whitespace": true,
        "normalize_mapping": {
          "bacillus": ["bacillus", "rod", "rod-shaped", "bacilli"],
          "coccus": ["coccus", "sphere", "spherical", "cocci"],
          "spirillum": ["spirillum", "spiral", "helical", "spirilla"],
          "tail": ["tail", "appendage", "flagellar"]
        }
      }
    }
  },
  "parsing_instructions": {
    "json_extraction": {
      "method": "regex",
      "pattern": "\\{.*\\}",
      "flags": ["DOTALL"]
    },
    "fallback_parsing": {
      "enabled": true,
      "method": "line_based",
      "keywords": [
        "gram_staining", "motility", "aerophilicity", "extreme_environment_tolerance",
        "biofilm_formation", "animal_pathogenicity", "biosafety_level", 
        "health_association", "host_association", "plant_pathogenicity",
        "spore_formation", "hemolysis", "cell_shape"
      ]
    }
  },
  "success_criteria": {
    "minimum_required_fields": 0,
    "require_all_mandatory": false,
    "allow_extra_fields": true
  },
  "error_handling": {
    "on_parse_failure": "return_null",
    "on_validation_failure": "return_partial",
    "on_missing_required": "return_errors"
  }
} 